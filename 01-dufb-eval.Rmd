---
knit: bookdown::preview_chapter
---

# An Evaluation of the Double Up Food Bucks program

## Introduction

Unhealthy eating is expensive. Obesity, heart disease, and other metabolic risk factors (stroke, type II diabetes, etc) are chronic conditions that account for more than `r round((276.2 + 1226 - (78 + 425.9))/3, digits=2)` billion dollars annually in health care expenditures [@chatterjee_checkup_2014]. More importantly, diseases linked to poor diet account for hundreds of thousands of death each year. Heart disease alone is the leading cause of death for all persons in the US, with stroke fifth and diabetes seventh [@national_center_for_health_statistics_health_2015]. Improving dietary health of American households has therefore become an ever-increasing priority for the United States.

Obesity and heart disease rates vary by income, affecting more low-income families than middle- and high-income families. Research on the dietary patterns of households receiving Supplemental Nutrition Assistance (SNAP) benefits has found that they are significantly *less* likely to meet USDA dietary guidelines than the average US household and much *more* likely to consume unhealthy foods [@andreyeva_dietary_2015; @nguyen_supplemental_2015; @wolfson_fruit_2015]. This nutritional disparity is driven by many factors, but the most consequential is undoubtedly lack of income.

SNAP is first and foremost an anti-hunger program, not health and nutrition program. To qualify, a household must be sufficiently budget constrained that hunger is considered likely without cash assistance. As a consequence, SNAP beneficiaries can often not afford the luxury of substituting healthy foods for unhealthy foods when unhealthy foods are cheaper and more abundant. Lack of income, therefore, forces SNAP beneficiaries to often make costly trade-offs between hunger and health [TK Need reference].

Economic theory suggests that behavior can be altered through financial incentives. [TK list off incentive research].

In the past few years, some non-profit programs have started testing financial incentives as a way to encourage SNAP eligible families to buy healthier foods. Of specific interest is Double Up Food Bucks (Double Up), an incentives-based program. Double Up doubles the purchasing power of SNAP recipients buying produce. Dollars spent on Michigan produce are matched up to $20 dollars but the matching funds can only be used to purchase more fruits and vegetables.

Initially only available at farmer's markets, Double Up began expanding into supermarkets in 2013. This expansion accelerated in 2014 with a 5 million dollar grant from the Food Insecurity Nutrition Incentive (FINI). Double Up is now being implemented across numerous stores in the Michigan area, with similar programs being launched and funded in numerous other states. The success of the program---whether it increases the volume of fresh fruits and vegetables purchased by SNAP shoppers---depends heavily on the collection of transaction data from stores implementing (and not implementing) Double Up. These data are slowly becoming available to researchers, providing an exciting and unprecedented opportunity to better understand how financial incentives work as a public health and policy tool.


### The Double Up Food Bucks Program

The non-profit organization Fair Food Networks (FFN) launched the Double Up Food Bucks program in 2009 in Detroit, Michigan. The intention of the program was to get more low-income families visiting and participating in local Detroit farmers markets. The mechanism for increasing participation was a financial incentive: a dollar-for-dollar matching subsidy for fruits and vegetables. This subsidy was accessible only to low-income families receiving SNAP benefits, who could exchange up to $20 of their benefits for a wooden token that could be used on up to $40 worth of locally grown, fresh produce.

Double Up program was considered successful given it had expanded to more than 150 farmers markets in 2014 from just 5 farmers markets in 2009. SNAP benefits have been used more than 200,000 times to purchase fresh produce, with more than 10,000 first time SNAP customers visiting farmers markets in 2013 alone [@fair_food_network_double_2014]. The program is considered by Fair Food Network to be a "three-fold" win given that the program helps local low-income families buy more fresh produce, provides new customers for local farmers, and stimulates the local food economy. Relative to farmers markets in other states, Double Up appears to have helped attract substantially more SNAP dollars ($1.7 million in Michigan versus $307,000 in Illinois, the second largest).

However, successful expansion into supermarkets and grocery stores is critical. Approximately three-quarters of all SNAP benefits in 2009 were used in supermarkets, super-centers, or small to large grocery stores [@castner_benefit_2011]. Less than 7% percent of SNAP benefits were used at local farmers markets. The amount of SNAP benefits used in local farmers markets has increased since 2009, but no where near the growth necessary to reach the type of stores most frequented by low-income families. If incentive programs like Double Up are going to be considered as one of the USDA's many tools to increase food access and combat obesity, then Double Up must be successfully implemented and scaled across supermarkets and grocery stores. Double Up must also prove it is effective in changing purchasing habits within the supermarket/grocery store food environment.

A 5.17 million dollar FINI grant was awarded to Fair Food Network to help it pilot three adjustments to Double Up Food Buck [@usda_nifa_usda_2015]. The first is to expand the Double Up Food Bucks program from farmers markets to retail supermarkets and grocery stores. The second was to test Double Up as a year-round in select locations instead of the current seasonal format. The last---and arguably most difficult and important---was to shift away from the tokens to electronic processing of Double Up transactions. Across these three dimensions, the efficacy of Double Up is to be measured by how much it increasing the amount of fruits and vegetables (produce) purchased by customers who use SNAP benefits.

The Fair Food Network started testing and gathering data from grocery stores implementing Double Up in 2014. The mechanisms used to implement Double Up varies across grocery stores and chains, as does the produce offered and customer demographics. One of FFN's partners largest partners, a Michigan grocery retail and distribution company, piloted the program in 2 of its stores in 2014. The company has since expanded to 5 stores in 2015 and then to 17 of 62 stores in 2016. Rapid scaling was possible due to the point-of-sale technology used by the company to implement Double Ups across its stores. It provides, to date, the best case study of scaling Double Up across numerous grocery stores that span different geographic areas and populations for a specific incentive mechanism.


## Data

These data come from a large grocery distributor and retailer serving multiple grocery chains. Three years of data will be made available, 2014 through 2016. These data are transaction level and will include (at least) store number, register, transaction ID, date and time of purchase, payment type, item, dollars, and quantity.

Double Up implementation was considered for a single grocery chain. The chain has more than 60 stores, 17 of which were selected as "treatment" stores (with Double Up). Of the remaining stores, data is being made available from an addition 15 to serve as "controls". The quotes here signify that these terms will be used as shorthand, but the terminology is somewhat misleading. The use of "treatment" and "control" could lead one to think store assignment was random. It was not.

### Store Selection Overview {-}

How the 17 "treatment" stores and 15 "control" stores were selected in 2016 is important. First and foremost, selection was *not* random. Stores were either selected by the company (13 of 17) or self-selected into Double Up (4 of 17). Second, the 15 control stores were selected *after* the selection of the 17 treatment stores. Data from all remaining stores was requested but the request was denied; only 15 stores had been approved by the company's management. Finally, and most importantly, the selection criteria for the 17 treatment stores is *observable*. The implications of this will be covered in more detail in the [Methods](#methods) section.

### Selection Progression of Double Up Stores {-}

The first 2 stores were piloted with Double Up in 2014. Both were in geographically distinct areas (these will be referred to as "`Node 0`" and "`Node 1`"). There was a small expansion adding 3 more stores in 2015. The 3 stores were selected because they were geographically close to the 2 original pilot stores (2 close to `Node 0`, 1 close to `Node 1`). The 5 stores are referred to as the "core". These location of these 5 stores, separated in two clusters, established the geographic constraints that were then used to determine most of the additional stores in 2016.

Double Up was expanded to 12 more stores in 2016, totaling 17. Of those 12, 6 were selected due to their proximity to the 5 core stores, their SNAP EBT^[Electronic Benefit Transfer.] sales figures, and similarity in surrounding demographics (high population density, more African-American). In other words, 9 of the 17 stores---excluding the initial 2 pilot storesâ€”--were selected on a set of *observable* characteristics. The remaining 6 stores were not.

Of the remaining 6 stores, 4 asked if they could be included in the program. These stores *self-selected* into Double Up, making these stores fundamentally distinct. They were considered, and then included, only because they fell within the "Top 50". The final 2 stores were selected by the company for "strategic business decision". The best interpretation of this is that the company thought that Double Up would provide a competitive edge to the 2 included stores given some internal calculus. How the company came to this decision is *unknown* and therefore *unobserved*.

### Expansion on Observables {-}

An example expansion (using fake data) can be seen in Figure \@ref(fig:dufb-expansion). In the top frame, one can see two blue dots. These blue dots simulate the first two pilot stores in 2014. The left blue dot is `Node 0` and the right blue dot is `Node 1`. The gray zones represents areas of higher population density. Dark gray is considered *urban*, defined as having a population density of 1500 persons or more per square mile. The light gray are small towns and cities, more densely populated than very rural areas, but could not be considered *urban*. The expansion in 2015 (middle frame) proceeds to the stores closest to the original pilot stores. The expansion continues to 6 more stores in 2016 (bottom frame) away from the nodes but also along areas of higher population density.

Not conveyed in Figure \@ref(fig:dufb-expansion) is that the 2015 and 2016 expansion also moves through stores that happen to be "highly ranked"---that is, have relatively higher SNAP EBT sales.^[All stores within the chain were ranked by SNAP EBT sales as a percentage of total sales.] Also not conveyed is the fact that there is a strong correlation between geography, population density, racial composition, and SNAP EBT sales. The 2015 expansion to the most nearby stores unsurprisingly overlapped with an expansion to stores with high SNAP EBT sales and into more densely populated, African-American communities. The 2016 Double Up expansion was more explicit given that set of feasible stores dramatically increases as one moves away from each node. Double Up stores were thus specifically selected not just by geographic proximity, but also by SNAP EBT sales ranking and demographic compositions similar to the initial 2014 stores.


```{r fig-dufb-expansion-setup, warning=FALSE, message=FALSE, echo=FALSE, eval=TRUE}

if(getOutputFormat() == "latex") pdf_yes = TRUE else pdf_yes = FALSE

# set up text
raw <- function(x) knitr::asis_output(x)

a <- list()

a[[1]] <- ("```{r dufb-expansion, fig.cap = 'Example expansion over time from 2014 to 2016 (top to bottom) using fake data. Blue dots denote stores with Double Up, pink dots denote without. Gray sectors denote higher population density. The initial nodes can be seen in the top (2014) frame.', fig.align='center', echo=FALSE}")
a[[2]] <- ("knitr::include_graphics('figures/expansion-v.pdf')")
if(!pdf_yes) a[[2]] <- gsub('pdf', 'png', a[[2]])
a[[3]] <- ("```")

out <- paste(a, collapse = '\n')
```

```{r fig-dufb-expansion-output, warning=FALSE, message=FALSE, eval=TRUE, echo=FALSE}
# MUST paste the output. cannot just knit!
raw(paste(knitr::knit(text = paste(out), quiet = TRUE)))
```

<!-- ![TK stores-2014]() -->



## Methods {#methods}



